/*
 FusionCharts JavaScript Library - KDtree
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.0
 FusionCharts JavaScript Library - ZoomScatter Chart
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.0
*/
(function(M){"object"===typeof module&&"undefined"!==typeof module.exports?module.exports=M:M(FusionCharts)})(function(M){M.register("module",["private","modules.renderer.js-kdtree",function(){function H(e){function k(e,J,A,p){var l={},t;t=p?"y":"x";if(J===A)return l.point=e[J],l;if(1===A-J)return e[J][t]>e[A][t]?(l.point=e[J],l.left={point:e[A]}):(l.point=e[A],l.left={point:e[J]}),l;t=J+A>>1;p?r(e,t,J,A):z(e,t,J,A);l.point=e[t];l.left=k(e,J,t-1,!p);l.right=k(e,t+1,A,!p);return l}function z(e,k,A,
q){for(var l,t,g,v,r;q>A;){600<q-A&&(l=q-A+1,t=k-A+1,g=G(l),v=.5*I(2*g/3),r=.5*B(g*v*(l-v)/l)*(0>t-l/2?-1:1),g=x(A,C(k-t*v/l+r)),l=E(q,C(k+(l-t)*v/l+r)),z(e,k,g,l));l=e[k];t=A;v=q;p(e,A,k);for(e[q].x>l.x&&p(e,A,q);t<v;){p(e,t,v);t++;for(v--;e[t].x<l.x;)t++;for(;e[v].x>l.x;)v--}e[A].x===l.x?p(e,A,v):(v++,p(e,v,q));v<=k&&(A=v+1);k<=v&&(q=v-1)}}function r(e,k,q,g){for(var l,t,z,v,D;g>q;){600<g-q&&(l=g-q+1,t=k-q+1,z=G(l),v=.5*I(2*z/3),D=.5*B(z*v*(l-v)/l)*(0>t-l/2?-1:1),z=x(q,C(k-t*v/l+D)),l=E(g,C(k+(l-
t)*v/l+D)),r(e,k,z,l));l=e[k];t=q;v=g;p(e,q,k);for(e[g].y>l.y&&p(e,q,g);t<v;){p(e,t,v);t++;for(v--;e[t].y<l.y;)t++;for(;e[v].y>l.y;)v--}e[q].y===l.y?p(e,q,v):(v++,p(e,v,g));v<=k&&(q=v+1);k<=v&&(g=v-1)}}function p(e,k,q){var g=e[k];e[k]=e[q];e[q]=g}var q=e&&e[0]&&e[0].r||5,g,x=Math.max,C=Math.floor,B=Math.sqrt,E=Math.min,G=Math.log,I=Math.exp,D=Math.pow;e=e||[];for(g=e.length;g--;)e[g].r>q&&(q=e[g].r),e[g].i=g,e[g].x=+e[g].x,e[g].y=+e[g].y;return{tree:0===e.length?{}:k(e,0,e.length-1,!1),search:function(e,
k,g){function p(f,h){return"circle"===g?B(D(f-e,2)+D(h-k,2))<=c:f>=c&&f<=b&&h>=a&&h<=d}function l(a){var b=e>=a.x1&&e<=a.x2&&k>=a.y1&&k<=a.y2,d;d=a.point.y;d=B(D(e-a.point.x,2)+D(k-d,2));r?b?f?a.point.i>r.point.i&&(r=a,f=b,h=d):(r=a,f=b,h=d):!f&&d<h&&(r=a,f=b,h=d):(r=a,f=b,h=d)}function t(f){"circle"===g?c=f:(c=e-f||0,b=e+f||0,a=k-f||0,d=k+f||0)}function z(a){a&&a.point&&(t(a.point.r),p(a.point.x,a.point.y)&&l(a),c<=a.point.x&&v(a.left),b>=a.point.x&&v(a.right))}function v(b){b&&b.point&&(t(b.point.r),
p(b.point.x,b.point.y)&&l(b),a<=b.point.y&&z(b.left),d>=b.point.y&&z(b.right))}var r,c=e-q,b=e+q,a=k-q,d=k+q,f=!1,h=0;z(this.tree);return r&&r.point||r}}}function x(e){this.configure(e)}var M=this.hcLib,R=function(e,k,g,r,p){return Math.pow(g-e,2)+Math.pow(r-k,2)<=Math.pow(p,2)},V=Math.PI,X=Math.cos,aa=Math.sin,W=Math.max,O=Math.min,S=V/180,g=function(e,k,g,r,p,q){return g<=W(e,p)&&g>=O(e,p)&&r<=W(k,q)&&r>=O(k,q)?!0:!1},G=function(e,k,g,r,p,q){k=(r-k)*(p-g);e=(g-e)*(q-r);isNaN(k)&&(k=0);isNaN(e)&&
(e=0);e=k-e;return 0===e?0:0<e?1:2};x.prototype={configure:function(e){this.validatorFn=e?this.shapeValidator():this.defaultValidator()},defaultValidator:function(){var e=this;return function(k){var g=e.mousePoint;return k&&1>=Math.pow((k.x-g.x)/e.xLimit,2)+Math.pow((k.y-g.y)/e.yLimit,2)?!0:!1}},shapeValidator:function(){var e=this;return function(k){var z=e.mousePoint,r=k&&k.shapeInfo,p=!1,q,x=z.x,z=z.y,N;switch(r&&r.type){case "circle":q=r.radius;p=R(x,z,k.x,k.y,q);break;case "arc":p=r.innerradius;
q=r.radius;p=!R(x,z,k.x,k.y,p)&&R(x,z,k.x,k.y,q);break;case "polygon":q=r.radius;N=r.startAngle;r=r.sides;a:{p=k.x;k=k.y;var C,B=0,E,H,I,D,O;C=!1;if(R(x,z,p,k,q)&&3<=r){C=void 0===N?.5*V:N%360*S;O=2*V/r;E=p+q*X(-C);D=k+q*aa(-C);for(N=0;N<r;N++){C+=O;H=p+q*X(-C);I=k+q*aa(-C);var J=E,A=D,M=H,l=I,t=x,L=z,v=z,W=G(J,A,M,l,t,L),c=G(J,A,M,l,Infinity,v),b=G(t,L,Infinity,v,J,A),a=G(t,L,Infinity,v,M,l);if(W!==c&&b!==a||0===W&&g(J,A,t,L,M,l)||0===c&&g(J,A,Infinity,v,M,l)||0===b&&g(t,L,J,A,Infinity,v)||0===a&&
g(t,L,M,l,Infinity,v)){if(0===G(E,D,x,z,H,I)){p=g(E,D,x,z,H,I);break a}B++}E=H;D=I}C=0!==B%2}p=C}break;case "rect":p=k.x;q=k.y;k=p+(r.width||0);r=q+(r.height||0);p=x>=p&&x<=k&&z>=q&&z<=r;break;case "default":p=!1}return p}},buildKdTree:function(e){this.kdTree=H(e);this.tree=this.kdTree.tree;return this},getNeighbour:function(e,k,g){var r=this.tree,p={x1:e.x-this.xLimit,x2:e.x+this.xLimit,y1:e.y-this.yLimit,y2:e.y+this.yLimit},q=this.validatorFn;this.mousePoint=e;if(k)return this.kdTree&&this.kdTree.search(e.x,
e.y,g);if(r)return this._searchBtwnLimit(p,r,!0,q)},_compair2closest:function(e,k){return!e||e&&k&&k.i>e.i?k:e},_searchBtwnLimit:function(e,k,g,r){var p,q,x=g?e.x1:e.y1,G=g?e.x2:e.y2;p=k&&k.point&&k.point[g?"x":"y"];if(void 0!==p)return r(k.point)&&(q=k.point),p>=x&&k.left&&(q=this._compair2closest(q,this._searchBtwnLimit(e,k.left,!g,r))),p<=G&&k.right&&(q=this._compair2closest(q,this._searchBtwnLimit(e,k.right,!g,r))),q},_setSearchLimit:function(e,k){this.xLimit=e;this.yLimit=k}};x.prototype.constructor=
x;M.KdTree=x}]);M.register("module",["private","modules.renderer.js-zoomscatter",function(){var H=this,x=H.hcLib,da=x.parseTooltext,R=x.Raphael,V=H.window,X=x.addEvent,aa=x.removeEvent,W=V.MouseEvent,O=V.document,S=x.BLANKSTRING,g=x.pluck,G=x.pluckNumber,e=x.getFirstValue,k=x.toRaphaelColor,z=x.hasSVG,r=x.isIE,p=x.getFirstColor,q=x.hasTouch,Z="rgba(192,192,192,"+(r?.002:1E-6)+")",N=Math,C=N.round,B=N.min,E=N.max,Y=N.abs,I=N.cos,D=N.sin,ba=N.floor,J=2*Math.PI,A=x.getMouseCoordinate,ea=x.POSITION_BOTTOM,
l=x.chartAPI,t=x.HUNDREDSTRING,L=function(c,b){var a=A(b.linkedItems.container,c),d=a.chartX,f=a.chartY,h=b.config,F=h.canvasLeft,w=h.canvasTop,m=h.canvasLeft+h.canvasWidth,h=h.canvasHeight+h.canvasTop;a.insideCanvas=!1;a.originalEvent=c;d>F&&d<m&&f>w&&f<h&&(a.insideCanvas=!0);return a},v=function(c,b,a){var d;b&&c&&(a||(a={}),a.originalEvent&&(a=a.originalEvent),a.touches&&(a=a.touches[0]),b.dispatchEvent?(W?d=new W(c,{bubbles:!!a.bubbles,cancelable:!!a.cancelable,clientX:a.clientX||a.pageX&&a.pageX-
O.body.scrollLeft-O.documentElement.scrollLeft||0,clientY:a.clientY||a.pageY&&a.pageY-O.body.scrollTop-O.documentElement.scrollTop||0,screenX:a.screenX||0,screenY:a.screenY||0,pageX:a.pageX||0,pageY:a.pageY||0}):O.createEvent&&(d=O.createEvent("HTMLEvents"),d.initEvent(c,!!a.bubbles,!!a.cancelable)),d.eventName=c,d&&b.dispatchEvent(d)):O.createEventObject&&b.fireEvent&&(d=O.createEventObject(),d.eventType=c,d.eventName=c,b.fireEvent("on"+c,d)))},ca=x.KdTree;l("zoomscatter",{standaloneInit:!0,defaultDatasetType:"zoomscatter",
applicableDSList:{zoomscatter:!0},highlightEnabled:!1,friendlyName:"ZoomScatter Chart",isXY:!0,defaultZeroPlaneHighlighted:!1,creditLabel:!1,configure:function(){var c,b=this.config;l.scatter.configure.apply(this,arguments);c=this.jsonData.chart;b.stepZoom=1-G(c.stepzoom,25)/100;b.showToolBarButtonToolText=G(c.showtoolbarbuttontooltext,1);b.btnResetChartToolText=g(c.btnresetcharttooltext,"Reset Chart");b.btnZoomOutToolText=g(c.btnzoomouttooltext,"Zoom out to previous level");b.btnZoomInToolText=g(c.btnzoomintooltext,
"<strong>Zoom in</strong><br/>Or double-click on plot to zoom-in");b.btnSelectZoomToolText=g(c.btnselectzoomtooltext,"<strong>Select a region to zoom-in</strong><br/>Click to enable pan mode.");b.btnPanToolText=g(c.btnpantooltext,"<strong>Drag to move across chart</strong><br/>Click to enable select-zoom mode.")},_setAxisLimits:function(){var c=this.jsonData,b=this.components.xAxis,a=g(c.chart.xaxislabelmode,"categories"),c=c.categories&&c.categories[0],c=(c&&c.category||[]).slice(),d,f=Infinity,
h=-Infinity,F;if("auto"===a||0===c.length){l.mscartesian._setAxisLimits.call(this);a=b[0].getLimit();b[0].setAxisConfig({hasCategory:0});b[0].resetCategoryAxisComponents();for(d=0;d<c.length;d+=1)if(F=c[d].x)F<f&&(f=F),F>h&&(h=F);if(h>a.max||f<a.min)h=E(h,a.max),f=B(f,a.min),b[0].setDataLimit(h,f)}else b[0].resetNumericAxisComponents(),l.scatterBase._setAxisLimits.call(this)},_createAxes:function(){var c=this.components;l.scatter._createAxes.call(this,arguments);c.yAxis[0].setAxisConfig({animateAxis:!1});
c.xAxis[0].setAxisConfig({animateAxis:!1})},_spaceManager:function(){var c,b,a=this.config,d=this.components,f=d.xAxis&&d.xAxis[0];b=d.yAxis&&d.yAxis||[];var h,F,w=d.legend.config.legendPos,m=a.xDepth,n=a.yDepth,e=a.canvasBgDepth,K=a.canvasBaseDepth,k=a.canvasBasePadding,g=d.canvas.config.canvasBorderWidth,q=a.realTimeConfig&&a.realTimeConfig.showRTValue,u=a.borderWidth,T=a.canvasMarginTop,U=a.canvasMarginBottom,y=a.canvasMarginLeft,Q=a.canvasMarginRight,d=a.minCanvasHeight,l=a.minCanvasWidth;c=a.minChartWidth;
var p=a.minChartHeight,r=a.height,v=a.width,t=a._initConfig||(a._initConfig={}),x=!1,B=a.origCanvasTopMargin,A=a.origCanvasBottomMargin,z,C,E=[];t.canvasLeft=a.canvasLeft;t.canvasWidth=a.canvasWidth;t.canvasHeight=a.canvasHeight;t.canvasTop=a.canvasTop;t.availableHeight=a.availableHeight;t.availableWidth=a.availableWidth;a.canvasWidth-2*u<c&&(F=(a.canvasWidth-c)/2);a.canvasHeight-2*u<p&&(h=(a.canvasHeight-p)/2);this._allocateSpace({top:h||u,bottom:h||u,left:F||u,right:F||u});a.origCanvasWidth=a.canvasWidth;
a.origCanvasLeft=a.canvasLeft;a.canvasRight=a.canvasLeft+a.canvasWidth;a.origCanvasRight=a.canvasRight;u=0;for(F=b.length;u<F;u++)h=b[u],c=.7*a.availableWidth,c=h&&h.placeAxis(c)||{},E.push({axisIndex:u,spaceTaken:c}),h&&this._allocateSpace(c);b=.7*a.canvasHeight;this._manageActionBarSpace&&this._allocateSpace(this._manageActionBarSpace(b));this._manageLegendSpace(void 0);n&&(this._allocateSpace({bottom:n}),a.shift=m+k+K);e&&this._allocateSpace({right:e});a.canvasWidth-2*g<l&&(C=(a.canvasWidth-l)/
2);this._allocateSpace({left:C||g,right:C||g});l>v-y-Q&&(n=a.canvasWidth-l,m=y+Q,y=a.canvasMarginLeft=n*y/m,Q=a.canvasMarginRight=n*Q/m);y=y>a.canvasLeft?y-a.canvasLeft:0;this._allocateSpace({left:y,right:Q>v-a.canvasRight?Q+a.canvasRight-v:0});b=w===ea?.6*a.canvasHeight:.6*a.canvasWidth;this._manageChartMenuBar(b);b=.2*a.availableHeight;this._allocateSpace(this._getSumValueSpace(b));b=.3*a.availableHeight;a.origCanvasHeight=a.canvasHeight;a.canvasBottom=a.canvasTop+a.canvasHeight;a.origCanvasBottom=
a.canvasBottom;a.origCanvasTop=a.canvasTop;a.realtimeEnabled&&(q?this._allocateSpace(this._realTimeValuePositioning(b)):this._hideRealTimeValue());b=.6*a.availableHeight;a.xAxisSpaceAllocation=w=f&&f.placeAxis(b);f&&this._allocateSpace(w);this._getDSspace&&this._allocateSpace(this._getDSspace(.4*a.canvasWidth));b=.3*a.availableHeight;this._manageScrollerPosition&&this._manageScrollerPosition(b);a.canvasHeight-2*g<d&&(z=(a.canvasHeight-d)/2);this._allocateSpace({top:z||g,bottom:z||g});this._allocateSpace({bottom:K});
d>r-T-U&&(x=!0,n=a.canvasHeight-d,m=T+U,T=a.canvasMarginTop=n*T/m,U=a.canvasMarginBottom=n*U/m);f=T>a.canvasTop?T-a.canvasTop:0;K=U>r-a.canvasBottom?U+a.canvasBottom-r:0;this._allocateSpace({top:f,bottom:K});x&&(m=B+A,x=a.canvasHeight,x>d&&(n=x-d,f=n*B/m,K=n*A/m),this._allocateSpace({top:f,bottom:K}));a.actualCanvasMarginTop=f;a.actualCanvasMarginLeft=y},_createToolBox:function(){var c,b,a,d,f,h,F,w,m,n=this,e=n.config;d=n.components;c=d.chartMenuBar;b=d.actionBar;m=e.showToolBarButtonToolText;var K=
e.stepZoom;c&&c.drawn||b&&b.drawn||(l.mscartesian._createToolBox.call(n),c=d.tb,b=c.graphics||(c.graphics={}),a=c.getAPIInstances(c.ALIGNMENT_HORIZONTAL),a=a.Symbol,d=(d.chartMenuBar||d.actionBar).componentGroups[0],f=b.zoomInButton=(new a("zoomInIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){n.zoom(K)},tooltext:m&&e.btnZoomInToolText||S}),h=b.zoomOutButton=(new a("zoomOutIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){var a=e.viewPortHistory;1<a.length&&
(a=a.slice(-2,-1)[0],n.updateVisual(a.x,a.y,a.scaleX,a.scaleY))},tooltext:m&&e.btnZoomOutToolText||S}),F=b.resetButton=(new a("resetIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){var a=e.viewPortConfig,b=n.graphics;1<e.viewPortHistory.length&&(a.isReset=!0,n.zoomSelection(0,0,e.canvasWidth,e.canvasHeight),e.viewPortHistory.splice(1),b.trackerGroup.attr({cursor:"default"}),n.updateButtonVisual(),n.updateSelectionBox(0,0,0,0));H.raiseEvent("zoomReset",{},n.chartInstance,[n.chartInstance.id])},
tooltext:m&&e.btnResetChartToolText||S}),w=b.toggleZoomInButton=(new a("zoomModeIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){n.toogleDragPan(!0)},tooltext:m&&e.btnSelectZoomToolText||S}),m=b.togglePanButton=(new a("panModeIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){n.toogleDragPan(!0)},tooltext:m&&e.btnPanToolText||S}),d.addSymbol(m,!0),d.addSymbol(w,!0),d.addSymbol(F,!0),d.addSymbol(h,!0),d.addSymbol(f,!0))},_createLayers:function(){var c=this.graphics,
b=this.components.paper;l.scatter._createLayers.call(this);!c.imageContainer&&(c.imageContainer=b.group("dataset-orphan",c.datasetGroup));this.__preDraw()},_dist:function(c,b){var a=this.components,d;d=a.xAxis[0];a=a.yAxis[0];if(c&&b)return d=(c.x-b.x)*d.getPVR(),a=(c.y-b.y)*a.getPVR(),Math.sqrt(Math.pow(d,2)+Math.pow(a,2))},__preDraw:function(){var c=this.graphics,b=c.imageContainer,a=this.config,d=a.canvasLeft,f=a.canvasTop,h=a.canvasWidth,e=a.canvasHeight,w=this.jsonData.chart,m=this.linkedItems,
m=m.eventListeners||(m.eventListeners=[]),n=this.linkedItems.container,P=this.components.paper;a.updateAnimDuration=500;b.transform("t"+d+","+f);b.attr({"clip-rect":d+","+f+","+h+","+e});a.status="zoom";a.maxZoomLimit=G(w.maxzoomlimit,1E3);a.viewPortHistory=[{scaleX:1,scaleY:1,x:0,y:0}];!c.trackerElem&&(c.trackerElem=P.rect(d,f,h,e,0,c.trackerGroup).attr({fill:Z,stroke:Z}));aa(n,q?"touchstart":"mousemove",this.searchMouseMove);m.push(X(n,"touchstart mousemove",this.searchMouseMove,this));this.zoomPanManager(b)},
searchMouseMove:function(c){var b,a,d,f=c.data,h=f.config,e=h.viewPortConfig;a=f.components;var w=a.xAxis[0],m=a.yAxis[0];f.linkedItems.container&&!h.isDragging&&((b=L(c,f))&&b.insideCanvas?(a=h.canvasTop,d=w.getAxisConfig("axisDimention").x||h.canvasLeft,e.lastMouseCoordinate={x:Number(w.getValue(b.chartX-d)),y:Number(m.getValue(b.chartY-a))},clearTimeout(e.neighbourSearchTimer),h.lastMouseEvent=c,e.neighbourSearchTimer=setTimeout(function(){h.isDragging||f._bestNeighbour(e.lastMouseCoordinate)},
100)):f.highlightPoint(!1))},updateSelectionBox:function(c,b,a,d){var f=this.config,h=this.graphics,e=this.components.paper,w=f.viewPortConfig,m=f.cursor,n=h.selectionBox,P=f.canvasRight,K=f.canvasLeft,k=f.canvasTop,g=f.canvasBottom,q=c<a?c:a,u=b<d?b:d,T=c>a?c:a,U=b>d?b:d,y=a-c,Q=b-d,m=m?0<y&&0<Q?"ne-resize":0>y&&0<Q?"nw-resize":0>y&&0>Q?"sw-resize":0<y&&0>Q?"se-resize":"default":"default",q=q<K?K:q>P?P:q,u=u<k?k:u>g?g:u,y=c===a&&b===d?0:(T>P?P:T<K?K:T)-q,Q=c===a&&b===d?0:(U>g?g:U<k?k:U)-u;n?n.attr({x:q,
y:u,width:y,height:Q,cursor:m}):h.selectionBox=e.rect(q,u,y,Q).attr({"stroke-width":1,stroke:"red",fill:"#00FF00",opacity:.2,cursor:m});h.trackerGroup.attr({cursor:m});f.cursor=m;w.selectionDimensions||(w.selectionDimensions={startX:0,endX:0,startY:0,endY:0});w.selectionDimensions.startX=c;w.selectionDimensions.endX=b;w.selectionDimensions.startY=a;w.selectionDimensions.endY=d},getValue:function(c){var b=this.config,a=this.components,d=b.viewPortConfig;c=this.getOriginalPositions(c.x,c.y,c.x,c.y);
var f=a.xAxis[0].config.axisRange,a=a.yAxis[0].config.axisRange,h=f.min,e=a.max;return{x:h+(c[0]-b.canvasLeft)/(b.canvasWidth*d.scaleX/(f.max-h)),y:e-(c[1]-b.canvasTop)/(b.canvasHeight*d.scaleY/(e-a.min))}},_getTouchViewPort:function(c,b,a){var d,f;f=this.config;var h=f.canvasLeft,e=f.canvasTop;d=f.canvasWidth;f=f.canvasHeight;var w=B(c[0].chartX,c[1].chartX)-h,m=B(c[0].chartY,c[1].chartY)-e,n=Math.abs(c[1].chartX-c[0].chartX);c=Math.abs(c[1].chartY-c[0].chartY);var h=B(b[0].chartX,b[1].chartX)-h,
P=B(b[0].chartY,b[1].chartY)-e,e=Math.abs(b[1].chartX-b[0].chartX)/n*a.scaleX;b=Math.abs(b[1].chartY-b[0].chartY)/c*a.scaleY;w=a.x+w/a.scaleX-h/e;a=a.y+m/a.scaleY-P/b;w=0>w?0:w;a=0>a?0:a;b=1>b?1:b;e=1>e?1:e;d-=d/e;f-=f/b;return{x:w>d?d:w,y:a>f?f:a,scaleX:e,scaleY:b}},getOriginalPositions:function(c,b,a,d){var f=this.config,h=f.viewPortConfig,e=h.scaleX,w=h.scaleY,m=h.x,h=h.y,n=B(c,a);c=E(c,a);a=B(b,d);b=E(b,d);c=c>f.canvasWidth?f.canvasWidth:c;b=b>f.canvasHeight?f.canvasHeight:b;n=0>n?0:n;a=0>a?0:
a;return[m+n/e,h+a/w,(c-n)/e,(b-a)/w]},zoomSelection:function(c,b,a,d){var f=this.config;a&&d&&(a=Math.abs(f.canvasWidth/a),d=Math.abs(f.canvasHeight/d),this.updateVisual(c,b,a,d))},toogleDragPan:function(c){var b=this.config,a=b.status;c&&(b.status="zoom"===a?"pan":"zoom",H.raiseEvent("zoomModeChanged",{panModeActive:b.status},this.chartInstance,[this.chartInstance.id]));this.updateButtonVisual()},updateManager:function(c){var b,a=this.components.dataset,d=a.length;for(b=0;b<d;b+=1)a[b].draw(c);
c||this._drawQuadrant()},zoomPanManager:function(){var c,b=[],a=[],d=this,f=d.config,h=d.graphics,e=d.components,w=e.xAxis[0],m=e.eventListeners||(e.eventListeners=[]),n=d.viewPortConfig,P=!1,k=0,g,l={},p=function(a){var b=a.chartX,d=a.chartY,c=w.getAxisConfig("axisDimention").x||f.canvasLeft,h=f.canvasTop,e=f.canvasRight,m=f.canvasBottom;b<c&&(a.chartX=E(b,c));b>e&&(a.chartX=B(b,e));d<h&&(a.chartY=E(d,h));d>m&&(a.chartY=B(d,m))},u={start:function(a){n=f.viewPortConfig;q=a.touches?!0:!1;b[0]=L(a,
d);d.updateSelectionBox(0,0,0,0);q&&(P=!1,c=a.touches.length,2===c&&(P=!0,l.x=n.x,l.y=n.y,l.scaleX=n.scaleX,l.scaleY=n.scaleY,b[0]=L(a.touches.item(0),d),b[1]=L(a.touches.item(1),d)));f.isDragging=!1;"pan"===f.status&&(f.panStartX=n.x,f.panStartY=n.y,b[0].insideCanvas&&h.trackerGroup.attr({cursor:"move"}))},on:function(c){var m,w,k,g;k=f.panStartX;var K=f.panStartY;m=n.scaleX;w=n.scaleY;var u=e.xAxis[0],p=e.yAxis[0];q=c.touches?!0:!1;a[0]=L(c,d);a[0].insideCanvas?"pan"===f.status&&h.trackerGroup.attr({cursor:"move"}):
h.trackerGroup.attr({cursor:"default"});q&&c&&(g=c.touches.length,2===g?(P=!0,a[0]=L(c.touches.item(0),d),a[1]=L(c.touches.item(1),d)):P=!1);!f.isDragging&&(!q||2<Y(a[0].chartX-b[0].chartX)||2<Y(a[0].chartY-b[0].chartY))&&(f.isDragging=!0,d.highlightPoint(!1),"zoom"===f.status&&(b[0].pointValue=d.getValue({x:b[0].chartX,y:b[0].chartY}),H.raiseEvent("selectionStart",{chartX:b[0].chartX,chartY:b[0].chartY,pageX:b[0].pageX,pageY:b[0].pageY,selectionTop:b[0].chartX+f.canvasLeft,selectionLeft:b[0].chartY+
f.canvasTop,selectionWidth:0,selectionHeight:0,startXVAlue:b[0].pointValue.x,startYVAlue:b[0].pointValue.y},d.chartInstance,[d.chartInstance.id])));if(f.isDragging)if(P){if(b[0].insideCanvas||b[1].insideCanvas)k=d._getTouchViewPort(b,a,l),d.updateVisual(k.x,k.y,k.scaleX,k.scaleY,!0)}else"zoom"===f.status?d.updateSelectionBox(b[0].chartX,b[0].chartY,a[0].chartX,a[0].chartY):"pan"!==f.status||1===m&&1===w||!b[0].insideCanvas||(c=b&&a[0].chartX-b[0].chartX,g=b&&a[0].chartY-b[0].chartY,k-=c/m,K-=g/w,
m=f.canvasWidth*(m-1)/m,w=f.canvasHeight*(w-1)/w,n.x=k>m?m:0>k?0:k,n.y=K>w?w:0>K?0:K,d.updateManager(),u.draw(),p.draw())},end:function(c){var e=L(c,d),m=w.getAxisConfig("axisDimention").x||f.canvasLeft,n=f.canvasTop,F;F=f.canvasWidth/4;var u=f.canvasHeight/4,e=isNaN(e.chartX)||isNaN(e.chartY)?a[0]||b[0]:e;if(f.isDragging){if(P){if(b[0].insideCanvas||b[1].insideCanvas)c=d._getTouchViewPort(b,a,l),d.updateVisual(c.x,c.y,c.scaleX,c.scaleY);P=!1}else"zoom"===f.status&&(c=e,F=b[0],p(F),p(c),n=d.getOriginalPositions(F.chartX-
m,F.chartY-n,c.chartX-m,c.chartY-n))&&(c.pointValue=d.getValue({x:c.chartX,y:c.chartY}),H.raiseEvent("selectionEnd",{chartX:c.chartX,chartY:c.chartY,pageX:c.pageX,pageY:c.pageY,selectionTop:c.chartX+f.canvasLeft,selectionLeft:c.chartY+f.canvasTop,selectionWidth:Math.abs(c.chartX-F.chartX),selectionHeight:Math.abs(c.chartY-F.chartY),startXVAlue:F.pointValue.x,startYVAlue:F.pointValue.y,endXValue:c.pointValue.x,endYValue:c.pointValue.y},d.chartInstance,[d.chartInstance.id]),F.chartX!==c.chartX&&F.chartY!==
c.chartY&&d.zoomSelection(n[0],n[1],n[2],n[3]),d.updateSelectionBox(0,0,0,0));f.isDragging=!1;c=a[0]||b[0];c.data=d;d.searchMouseMove(c)}else e.insideCanvas&&(k+=1,setTimeout(function(){k=0;g=void 0},500),2===k?(c&&c.touches?!0:!1)===g&&(m=e.chartX-m,n=e.chartY-n,n=d.getOriginalPositions(m-F,n-u,m+F,n+u),d.zoomSelection(n[0],n[1],n[2],n[3]),c.preventDefault()):g=c&&c.touches?!0:!1);h.trackerGroup.attr({cursor:"default"})}};m.push(X(d.linkedItems.container,"pointerdrag",function(a){u[a.state](a.originalEvent)}))},
_drawDataset:function(){var c,b=this.components.dataset,a=b.length;for(c=0;c<a;c+=1)b[c]._deleteGridImages(),b[c].graphics._grid={};this.updateVisual()},updateVisual:function(c,b,a,d,f){var h,e,w,m,n;h=this.config;var k=this.components,g=h.viewPortConfig;n=h.canvasWidth;var q=h.canvasHeight,l=n,p=q,u=h.viewPortHistory,p=u.slice(-1)[0],r=[],r=h.status,t=h._initConfig;e=k.xAxis[0];m=k.yAxis[0];w=this.graphics;k=(k=k.quadrant)&&k.graphics.container;l=h.maxZoomLimit;g.x=isNaN(c)?c=p.x:c;g.y=isNaN(b)?
b=p.y:b;g.scaleX=a||(a=p.scaleX);g.scaleY=d||(d=p.scaleY);a>l&&(g.x=c=B(c,n-n/l),g.scaleX=a=l);d>l&&(g.y=b=B(b,q-q/l),g.scaleY=d=l);if(f)this.updateManager(f);else for(1<a||1<d?("zoom"===r&&this.toogleDragPan(!0),a>=p.scaleX||d>=p.scaleY?(u.push({scaleX:a,scaleY:d,x:c,y:b}),r=["zoomed","zoomIn"]):(u.pop(),p=u.slice(-1)[0],g.x=p.x,g.y=p.y,g.scaleX=p.scaleX,g.scaleY=p.scaleY,r=["zoomed","zoomOut"])):(1<u.length&&u.pop(),"pan"===r&&this.toogleDragPan(!0),r=["zoomed","zoomOut"]),this.toogleDragPan(),
l=h.canvasWidth,p=h.canvasHeight,c&&(c=g.x*=l/n),b&&(g.y*=p/q),h.canvasLeft=t.canvasLeft,h.canvasWidth=t.canvasWidth,h.canvasHeight=t.canvasHeight,h.canvasTop=t.canvasTop,h.availableHeight=t.availableHeight,h.availableWidth=t.availableWidth,this._spaceManager(),this._postSpaceManagement(),this.updateManager(),e.draw(),m.draw(),this._drawCanvas(),n={"clip-rect":h.canvasLeft+","+h.canvasTop+","+h.canvasWidth+","+h.canvasHeight},h.viewPortConfig&&this.graphics.imageContainer.attr({x:h.canvasLeft,y:h.canvasRight}),
w.imageContainer.attr(n).transform("T"+h.canvasLeft+","+h.canvasTop),w.tracker&&w.tracker.attr(n),k&&k.attr(n),h=e.getValue(0),e=e.getValue(l),w=m.getValue(0),m=m.getValue(p),0===arguments.length&&(r=S),n=0;n<r.length;n+=1)"zoomed"===r[n]&&H.raiseEvent("zoomed",{level:u.length,startX:h,startY:w,endX:e,endY:m},this.chartInstance,[this.chartInstance.id]),"zoomIn"===r[n]?H.raiseEvent("zoomedIn",{level:u.length,startX:h,startY:w,endX:e,endY:m},this.chartInstance,[this.chartInstance.id]):"zoomOut"!==r[n]||
g.isReset||H.raiseEvent("zoomedOut",{level:u.length,startX:h,startY:w,endX:e,endY:m},this.chartInstance,[this.chartInstance.id]);this.highlightPoint(!1);g.isReset=!1},getFillColor:function(c,b){b=parseFloat(b/100);0>b?b=0:1<b&&(b=1);c||(c="#FFFFFF");if(r&&!z)return b?c:"transparent";c=c.replace(/^#?([a-f0-9]+)/ig,"$1");c=x.graphics.HEXtoRGB(c);c[3]=b.toString();return"rgba("+c.join(",")+")"},_bestNeighbour:function(c){var b=this.components,a=this.config,d=b.xAxis[0],f=b.yAxis[0],h=this.jsonData.chart,
e=a.canvasLeft,w=a.canvasTop,m,n,k,l,q,p,r,u,t,v,y,x;x=b.numberFormatter;t=b.dataset;for(m=t.length-1;0<=m;--m)if(b=t[m],y=b.config,n=y.showHoverEffect,u=y.showTooltip,b.components.kDTree&&b.visible&&(l=b.getElement(c),b=this._dist(c,l),!q||b<p))if(k=m,q=l,p=b,r=t[k]&&y.zoomedRadius||0,p<=r)break;p<=E(r+2,5)?(c=d.getPixel(q.x)-e,w=f.getPixel(q.y)-w,e=g(q.tooltext,y.plotToolText),b=t[k],y=b.config,t=y.tooltip.toolTipSepChar,p=y.tooltip.seriesNameInToolTip,r=q.x,m=q.y,q&&(v=x.yAxis(m),x=x.xAxis(r),
v=Number(u)?void 0!==e?da(e,[4,5,6,7,8,9,10,11],{yaxisName:f.getAxisConfig("axisName"),xaxisName:d.getAxisConfig("axisName"),yDataValue:v,xDataValue:x},q,h,b.config):(p?y.seriesname?y.seriesname+t:"":"")+"x:"+x+t+"y:"+v:S),a.lastHoveredPoint!==q&&this.highlightPoint(n,c,w,q,k,v)):this.highlightPoint(!1)},highlightPoint:function(c,b,a,d,f,h){var e=this,w=e.config,m=e.components,n=e.graphics,k=m.paper,g=n.tracker,q=(m=m.dataset[f])&&m.config;f=m&&q.zoomedRadius||0;var l=m&&q.hoverCosmetics,m=l&&l.fill,
q=l&&l.borderColor,l=l&&l.borderThickness,p={},p=function(a){x.plotEventHandler.call(this,e,a)},u=function(a){x.plotEventHandler.call(this,e,a,"dataplotRollover")},r=function(a){x.plotEventHandler.call(this,e,a,"dataplotRollout")},t=d&&d.link;g||(g=n.tracker=k.circle(0,0,0,n.trackerGroup).attr({"clip-rect":w.canvasLeft+","+w.canvasTop+","+w.canvasWidth+","+w.canvasHeight}).click(p).trackTooltip(!0).hover(u,r));d&&g.data("eventArgs",{x:d.x,y:d.y,tooltip:h,link:t});w.lastHoveredPoint=d;p=Number(c)?
{r:f,fill:m,stroke:q,"stroke-width":l}:{r:f,fill:Z,stroke:Z,"stroke-width":0};p.cursor=t?"pointer":"";g.attr(p).tooltip(h).transform("t"+(b+w.canvasLeft)+","+(a+w.canvasTop));d&&v("mouseover",g&&g.node,w.lastMouseEvent)},zoom:function(c){var b,a,d=this.config,f=d.viewPortConfig;b=f.x;a=f.y;var h=d.canvasWidth,d=d.canvasHeight,e=h/f.scaleX,w=d/f.scaleY,f=e*c;c*=w;f=f>h?h:f;c=c>d?d:c;b=b+e/2-f/2;a=a+w/2-c/2;b=0>b?0:b;a=0>a?0:a;b=b+f>h?h-f:b;a=a+c>d?d-c:a;this.zoomSelection(b,a,f,c)},updateButtonVisual:function(){var c,
b,a,d;a=this.config;var f=this.components.tb.graphics;c=a.status;var h;1>=a.viewPortHistory.length?(a=["zoomOutButton","resetButton","togglePanButton"],d=["zoomInButton"],h="toggleZoomInButton"):(d=["resetButton","zoomOutButton","zoomInButton"],a=[],"zoom"===c?(d.push("togglePanButton"),h="toggleZoomInButton"):"pan"===c&&(d.push("toggleZoomInButton"),h="togglePanButton"));for(c=0;c<a.length;c+=1)b=a[c],f[b].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"},
normal:{fill:"#FFFFFF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],"button-disabled":!1,stroke:"#E3E3E3","stroke-opacity":1});for(c=0;c<d.length;c+=1)b=d[c],f[b].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#aaaaaa",cursor:"pointer"},normal:{fill:"#FFFFFF",
stroke:"#C2C2C2","stroke-width":1,cursor:"pointer"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"pointer"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#C2C2C2",cursor:"pointer"}},"button-disabled":!1,fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],stroke:"#C2C2C2","stroke-opacity":1});f[h].node.attr({config:{hover:{fill:"#EFEFEF","stroke-width":1,stroke:"#EFEFEF",cursor:"default"},normal:{fill:"#EFEFEF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},
disable:{fill:"#E6E6E6","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},"button-disabled":!1,fill:["#EFEFEF","#EFEFEF","#EFEFEF","#EFEFEF",!0],stroke:"#E3E3E3","stroke-opacity":1})},_drawAxis:function(){}},l.scatterBase);M.register("component",["dataset","zoomscatter",{type:"zoomscatter",configure:function(){var c,b,a,d,f,h,e;h=this.chart;var w=h.config;d=h.jsonData.chart;var m=h.getFillColor,n=this.JSONData;
this.__base__.configure.call(this);h=this.config;b=this.components;c=g(n.anchorbordercolor,d.anchorbordercolor);h.anchorBorderThickness=g(n.anchorborderthickness,d.anchorborderthickness,c?1:0);b.kDTree=new ca;h.chunkSize=Math.floor(B((n.data||[]).length/5,5E4));c=h.staticRadius=G(d.staticradius,0);h.radius=G(n.radius,n.anchorradius,d.radius,d.anchorradius,c?3:.5);e=h.showHoverEffect;c=p(g(n.plotfillhovercolor,n.hovercolor,d.plotfillhovercolor,d.hovercolor,h.anchorbgcolor));b=g(n.plotfillhoveralpha,
n.hoveralpha,d.plotfillhoveralpha,d.hoveralpha,t);a=p(g(n.plotfillhovercolor,n.hovercolor,d.plotfillhovercolor,d.hovercolor,c));f=g(n.plotfillhoveralpha,n.hoveralpha,d.plotfillhoveralpha,d.hoveralpha,t);d=G(n.borderhoverthickness,d.borderhoverthickness,1);h.hoverCosmetics={showHoverEffect:e,fill:m(c,b),borderColor:m(a,f),borderThickness:d};h.tooltip={toolTipVisible:w.showtooltip,seriesNameInToolTip:w.seriesnameintooltip,toolTipSepChar:w.tooltipsepchar};h.lastViewPort={}},draw:function(c){var b,a,
d;b=this.graphics;d=this.chart;a=d.components;var f=d.graphics.imageContainer,h=a.paper;d=d.config;var e=this.visible,w=d.viewPortConfig,m=this.config,n=m.lastViewPort||{},g=!1;b.container||(b.container=h.group("grid-container",f));e&&this._conatinerHidden?this.show():e||this._conatinerHidden||this.hide();if(c)this._pixelatedDraw();else{if(n.scaleX!==w.scaleX||n.scaleY!==w.scaleY)n.scaleX=w.scaleX,n.scaleY=w.scaleY,c=a.xAxis[0],b=a.yAxis[0],a=c.getPVR(),c=b.getPVR(),d=E(m.zoomedRadius=B(m.staticRadius?
m.radius:m.radius*B(w.scaleX,w.scaleY),d.canvasWidth/2,d.canvasHeight/2),2),this.components.kDTree._setSearchLimit(d/a,d/c),this._deleteGridImages(),this.graphics._grid={},g=!0;this._gridDraw(g)}},_pixelatedDraw:function(){var c,b,a,d,f,h=this.chart.config;a=this.config;d=this.graphics;var e=a.drawLine,g=a.lastViewPort||{},m=g.scaleX,n=g.scaleY;f=h.viewPortConfig;var k=f.scaleX,l=f.scaleY,g=this.graphics._grid||(this.graphics._grid=[]),m=k/m,n=l/n,l=h.canvasWidth*m,h=h.canvasHeight*n;a=a._batchDarwTimers;
d=d.container;clearTimeout(this.timer);if(a&&a.length)for(;a.length;)clearTimeout(a.shift());d.transform("t"+C(-f.x*f.scaleX)+","+C(-f.y*f.scaleY));for(c in g)if(f=g[c])for(b in f)(d=f[b])&&d.drawState&&(a=d.image,a.attr({x:d.xPixel*m,y:d.yPixel*n,width:l,height:h}),e&&(a=d.lineImage,a.attr({x:d.xPixel*m,y:d.yPixel*n,width:l,height:h})))},_deleteGridImages:function(){var c,b,a,d,f;b=this.config;var h=this.graphics,e=h._imagePool||(h._imagePool=[]),g=h._canvasPool||(h._canvasPool=[]),m=h._lineImagePool||
(h._lineImagePool=[]),n=h._lineCanvasPool||(h._lineCanvasPool=[]),k=h._grid||[];if((b=b._batchDarwTimers)&&b.length)for(;b.length;)clearTimeout(b.shift());for(a in k)if(f=k[a])for(d in f)(b=f[d])&&b.drawState&&(c=b.image,c.attr({src:"",width:0,height:0}),e.push(c),delete b.image,c=b.canvas,g.push(c),delete b.canvas,delete b.ctx,c=b.lineImage)&&(c.attr({src:"",width:0,height:0}),m.push(c),delete b.lineImage,c=b.lineCanvas,n.push(c),delete b.lineCanvas,delete b.lineCtx);delete h._grid},_gridDraw:function(c){var b=
this,a=b.graphics,d=b.config,f=b.chart.config.viewPortConfig;clearTimeout(d.timer);a.container.transform("t"+C(-f.x*f.scaleX)+","+C(-f.y*f.scaleY));c?b._gridManager():d.timer=setTimeout(function(){b._gridManager()},10)},_gridManager:function(){var c,b,a,d,f,h,e,g,m,n=this,k=n.config,l=n.graphics._grid,q=k._drawGrid||(k._drawGrid=[]),p=n.chart,r=p.config,p=p.components;f=r.viewPortConfig;h=f.scaleX;var u=f.scaleY;e=Math.ceil(u);d=Math.ceil(h);var t=p.xAxis[0],v=p.yAxis[0],p=t.getAxisConfig("axisDimention").axisLength||
r.canvasWidth,r=r.canvasHeight,y=t.config,x=v.config,A=y.axisRange.min,y=y.axisRange.max,z=x.axisRange.min,x=x.axisRange.max,C=(y-A)/h,D=(x-z)/u;b=k.radius*B(f.scaleX,f.scaleY)+k.plotCosmetics.borderWidth;t=Y(b/(p*f.scaleX/(t.max-t.min)));v=Y(b/(r*f.scaleY/(v.max-v.min)));b=p/h;m=r/u;c=B(1,b/10,m/10);var u={},G=[];h=f.x+c;b=f.x-c+b;g=f.y+c;c=f.y+m-c;f=n._getFocusedGrid(h,g);m=u[f.row]||(u[f.row]={});m[f.col]=!0;f=n._getFocusedGrid(b,g);m=u[f.row]||(u[f.row]={});m[f.col]=!0;f=n._getFocusedGrid(b,c);
m=u[f.row]||(u[f.row]={});m[f.col]=!0;f=n._getFocusedGrid(h,c);m=u[f.row]||(u[f.row]={});m[f.col]=!0;h=n._getFocusedGrid();f=h.row;h=h.col;b=E(f-1,0);f=B(f+1,e-1);e=E(h-1,0);h=B(h+1,d-1);d=x-b*D;for(g=b;g<=f;g+=1){l[g]||(l[g]={});b=A+e*C;for(m=e;m<=h;m+=1)c=l[g][m],c||(a=E(d-D,z),c=B(b+C,y),c=l[g][m]={xPixel:m*p,yPixel:g*r,xMinValue:b,yMinValue:a,xMaxValue:c,yMaxValue:d,drawState:0,xMinWPad:E(b-t,A),yMinWPad:E(a-v,z),xMaxWPad:B(c+t,y),yMaxWPad:B(d+v,x)}),c.drawState||(u[g]&&u[g][m]?q.push({row:g,
col:m}):G.push({row:g,col:m})),b+=C;d-=D}(q.length||G.length)&&n._drawGridArr(function(){k._drawGrid=G;n._drawGridArr()})},_getFocusedGrid:function(c,b){var a=this.chart.config,d=a.viewPortConfig,f=a.canvasWidth/d.scaleX,a=a.canvasHeight/d.scaleY,e=isNaN(c)?d.x+f/2:c,d=isNaN(b)?d.y+a/2:b;return{row:ba(d/a),col:ba(e/f)}},_drawGridArr:function(c){var b,a,d,f,e=this.chart;b=e.config;var g=e.components,k=b.viewPortConfig,m=this.config,n=m.drawLine,l=m._drawGrid,p=[],q=this.graphics.container,r=g.paper,
g=g.xAxis[0].getAxisConfig("axisDimention").axisLength||b.canvasWidth,t=b.canvasHeight,u=this.graphics._grid,v=this.graphics._imagePool||[],x=this.graphics._canvasPool||[],y=this.graphics._lineImagePool||[],A=this.graphics._lineCanvasPool||[],z=m.plotCosmetics,k=m.radius*B(k.scaleX,k.scaleY),e=(e.components.xAxis[0].getAxisConfig("axisDimention").x||b.canvasLeft)-b.canvasLeft;if(l.length){for(;l.length;)b=l.shift(),b=u[b.row][b.col],2!==b.drawState&&(b.drawState=2,n&&(b.lineImage=y.length?y.shift():
r.image("",q),b.lineImage.attr({x:b.xPixel+e,y:b.yPixel,width:g,height:t}),b.lineCanvas=x.length?d=A.shift():d=V.document.createElement("canvas"),d.setAttribute("width",g),d.setAttribute("height",t),f=b.lineCtx=d.getContext("2d"),f.fillStyle=z.fillStyle,f.strokeStyle=z.lineStrokeStyle,f.lineWidth=z.lineWidth),b.image=v.length?v.shift():r.image("",q),b.image.attr({x:b.xPixel+e,y:b.yPixel,width:g,height:t}),b.canvas=x.length?a=x.shift():a=V.document.createElement("canvas"),a.setAttribute("width",g),
a.setAttribute("height",t),f=b.ctx=a.getContext("2d"),1>k?(f.strokeStyle=z.fillStyle,f.lineWidth=.5):(f.fillStyle=z.fillStyle,f.strokeStyle=z.strokeStyle,f.lineWidth=z.borderWidth),p.push(b));m._batchDrawindex=this.JSONData.data&&this.JSONData.data.length-1||0;this._drawGridArrBatch(p,c,!m.animation.enabled)}else c&&c()},_drawGridArrBatch:function(c,b,a){var d,f,e,g,k,m,n,l,p,q,r,t,u,v,x,y,z=this;m=z.config;var A=z.chart.components;y=z.config;var B=y.drawLine;l=y.plotCosmetics;g=y._batchDrawindex;
e=z.components.data;k=g-y.chunkSize;var D=A.yAxis[0],E=y.zoomedRadius,A=A.xAxis[0].getPVR(),D=D.getPVR(),G=m.showRegressionLine,H=y._store||[],I=l.lineWidth||1>E;G&&(v=m.regLineColor,x=m.regressionLineThickness);for(l=0;l<c.length;l+=1)c[l].ctx.beginPath(),B&&c[l].lineCtx.beginPath();for(k=0>=k?0:k;g>=k;--g)if((r=e[g]&&e[g].config.setValue)&&!isNaN(r.x)&&!isNaN(r.y))for(l=0;l<c.length;l+=1)(d=c[l],t=d.xMinValue,u=d.yMaxValue,r.x<d.xMinWPad||r.x>d.xMaxWPad||r.y<d.yMinWPad||r.y>d.yMaxWPad||(p=d.ctx,
q=d.lineCtx,d=C((r.x-t)*A),f=C((u-r.y)*D),(n=H[d])||(n=H[d]={}),n[f]))||(n[f]=!0,B&&(n=0<=g-1&&e[g-1].config.setValue)&&(q.moveTo(C((n.x-t)*A),C((u-n.y)*D)),q.lineTo(d,f)),1>E?(p.moveTo(d,f),p.lineTo(d+1,f)):(p.moveTo(d+E,f),p.arc(d,f,E,0,J)));for(l=0;l<c.length;l+=1)d=c[l],p=d.ctx,p.fill(),I&&p.stroke(),p.closePath(),B&&(q=d.lineCtx,q.fill(),I&&q.stroke(),q.closePath());y._batchDrawindex=g;if(0<=g){if(!a)for(l=0;l<c.length;l+=1)p=c[l].image,e=c[l].canvas,p.attr({src:e.toDataURL("image/png")}),y.drawLine&&
(v=c[l].lineImage,x=c[l].lineCanvas,v.attr({src:x.toDataURL("image/png")}));(y._batchDarwTimers||(y._batchDarwTimers=[])).push(setTimeout(function(){z.chart&&z._drawGridArrBatch(c,b,a)},0))}else{delete y._store;if(G)for(y=m.regressionData,l=0;l<c.length;l+=1)d=c[l],g=d.xMinValue,m=d.yMaxValue,p=d.image,e=d.canvas,p=d.ctx,e=(y[0].x-g)*A,k=(m-y[0].y)*D,g=(y[1].x-g)*A,m=(m-y[1].y)*D,p.beginPath(),p.strokeStyle=v,p.lineWidth=x,p.moveTo(e,k),p.lineTo(g,m),p.stroke(),p.closePath();for(l=0;l<c.length;l+=
1)d=c[l],p=d.image,e=d.canvas,d.drawState=1,p.attr({src:e.toDataURL("image/png")}),B&&(v=d.lineImage,x=d.lineCanvas,v.attr({src:x.toDataURL("image/png")}));z.tree||setTimeout(function(){z._buildKdTree()},250);b&&b()}},_buildKdTree:function(){var c=this.config;c._kdPoints=(this.JSONData.data||[]).slice();this.components.kDTree||(this.components.kDTree=new ca);this.components.kDTree.buildKdTree(c._kdPoints);delete c._kdPoints},getElement:function(c){if(this.components.kDTree)return this.components.kDTree.getNeighbour(c)},
show:function(){var c=this.graphics,c=c&&c.container;this.visible=!0;this._conatinerHidden=!1;c.show()},hide:function(){var c=this.graphics,c=c&&c.container;this.visible=!1;this._conatinerHidden=!0;c.hide()},_addLegend:function(){var c=this.chart,b=c.jsonData.chart,a=this.config,d=this.JSONData,f=c.getFillColor,h=g(d.anchorbordercolor,b.anchorbordercolor),l=p(g(h,a.plotBorderColor)),h=G(d.anchorborderthickness,b.anchorborderthickness,h?1:0),q=p(g(d.anchorbgcolor,d.color,b.anchorbgcolor,a.plotColor)),
m=g(d.anchoralpha,d.alpha,b.anchoralpha,t),b=g(d.anchorbgalpha,d.alpha,b.anchorbgalpha,t),d={color:a.lineColor,alpha:a.lineAlpha},f=a.plotCosmetics={fillStyle:f(q,m*b/100),strokeStyle:f(l,m),borderWidth:h,lineWidth:a.lineThickness,lineStrokeStyle:k(d)};this.legendItemId=c.components.legend.addItems(this,this.legendInteractivity,{enabled:a.includeInLegend,type:this.type,fillColor:f.fillStyle,strokeColor:f.strokeStyle,anchorSide:2,strokeWidth:a.anchorBorderThickness,label:e(this.JSONData.seriesname)})},
_setConfigure:function(){var c,b,a,d,f,e,k,l,m,n=-Infinity,p=Infinity,q=Infinity,r=-Infinity,t=this.components.data||(this.components.data=[]);c=this.chart;var v=x.parseUnsafeString,u=this.config,z=this.JSONData,A=c.jsonData.chart,y=z.data||[],D=y.length,C=c.components.numberFormatter,H=v(A.yaxisname),I=v(A.xaxisname),J=u.lineDashed,M=u.lineDashStyle,L=u.parentYAxis,N=u.toolTipSepChar,O=u.seriesname;for(c=0;c<D;c+=1)d=y[c],a=t[c]||(t[c]={}),b=a.config||(a.config={}),b.setValue=f={x:C.getCleanValue(d.x),
y:C.getCleanValue(d.y),index:c},r=E(r,f.x),q=B(q,f.x),n=E(n,f.y),p=B(p,f.y),u.showRegressionLine&&this.pointValueWatcher(f.x,f.y,u.regressionObj),b.setLink=g(d.link),b.anchorProps=this._parseAnchorProperties(c),b.showValue=G(d.showvalue,u.showValues),b.dashed=G(d.dashed,J),b.color=g(d.color,u.lineColor),b.alpha=g(d.alpha,u.lineAlpha),b.dashStyle=b.dashed?M:"none",b.toolTipValue=e=C.dataLabels(f.y,L),b.setDisplayValue=m=v(d.displayvalue),l=b.formatedVal=g(d.toolTipValue,C.dataLabels(f.y,L)),k=C.xAxis(f.x),
b.displayValue=g(m,e),b.setTooltext=x.getValidValue(v(g(d.tooltext,u.plotToolText))),u.showTooltip?void 0!==b.setTooltext?(f=[4,5,6,7,8,9,10,11],k={yaxisName:H,xaxisName:I,yDataValue:l,xDataValue:k},d=da(b.setTooltext,f,k,d,A,z)):null===l?d=!1:(d=O?O+N:S,d+=f.x?k+N:S,d+=e):d=!1,b.toolText=d,a?a.graphics||(t[c].graphics={}):a=t[c]={graphics:{}},b.hoverEffects=this._parseHoverEffectOptions(a),b.anchorProps.isAnchorHoverRadius=b.hoverEffects.anchorRadius;u.xMax=r;u.xMin=q;u.yMin=p;u.yMax=n;u.showRegressionLine&&
(u.regressionData=this.getRegressionLineSeries(u.regressionObj,u.showYOnX,D));this.ErrorValueConfigure&&this.ErrorValueConfigure()}},"Scatter"]);R.addSymbol({zoomInIcon:function(c,b,a){c-=.2*a;b-=.2*a;var d=.8*a,f=R.rad(43),e=R.rad(48),g=c+d*I(f),f=b+d*D(f),k=c+d*I(e),e=b+d*D(e),m=R.rad(45),l=g+a*I(m),p=f+a*D(m),q=k+a*I(m)-1;a=e+a*D(m)-1;return["M",g,f,"A",d,d,0,1,0,k,e,"Z","M",g+1,f+1,"L",l,p,q,a,k+1,e+1,"Z","M",c-2,b,"L",c+2,b,"Z","M",c,b-2,"L",c,b+2,"Z"]},zoomModeIcon:function(c,b,a){var d=[];
c-=.2*a;b-=.2*a;var f=.8*a,e=R.rad(43),g=R.rad(48),k=c+f*I(e),e=b+f*D(e),m=c+f*I(g),g=b+f*D(g),l=R.rad(45),p=k+a*I(l),q=e+a*D(l),r=m+a*I(l)-1;a=g+a*D(l)-1;return d=d.concat(["M",k,e,"A",f,f,0,1,0,m,g,"Z","M",k+1,e+1,"L",p,q,r,a,r+1,a-1,r+1.5,a+1.5,r-1,a+1,r,a,m+1,g+1,"Z","M",c-2,b,"L",c+2,b,"Z","M",c,b-2,"L",c,b+2,"Z"])},panModeIcon:function(c,b,a){var d=c-11.25,d=c;a*=2.5;return[].concat(["M",d-a/16,b-a/8,"L",d+a/16,b-a/8,"L",d+a/16,b-a/3.2,"L",d+6*a/32,b-10*a/32,"L",d,b-a/2,"L",d-6*a/32,b-10*a/
32,"L",d-a/16,b-a/3.2,"Z","M",d+4*a/32,b-2*a/32,"L",d+10*a/32,b-2*a/32,"L",d+10*a/32,b-6*a/32,"L",d+16*a/32,b,"L",d+10*a/32,b+6*a/32,"L",d+10*a/32,b+2*a/32,"L",d+4*a/32,b+2*a/32,"Z","M",d+2*a/32,b+5*a/32,"L",d+2*a/32,b+10*a/32,"L",d+6*a/32,b+10*a/32,"L",d,b+16*a/32,"L",d-6*a/32,b+10*a/32,"L",d-2*a/32,b+10*a/32,"L",d-2*a/32,b+5*a/32,"Z","M",d-4*a/32,b-2*a/32,"L",d-10*a/32,b-2*a/32,"L",d-10*a/32,b-6*a/32,"L",d-16*a/32,b,"L",d-10*a/32,b+6*a/32,"L",d-10*a/32,b+2*a/32,"L",d-4*a/32,b+2*a/32,"Z"])}})}])});
